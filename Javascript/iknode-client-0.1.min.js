var iknode=iknode||{};iknode.Client=function(a){if(!(a.hasOwnProperty("userId")&&a.hasOwnProperty("apiKey"))){throw"It is required to provide the User Id and Api Key"
}this.userId=a.userId;this.apiKey=a.apiKey};iknode.Client.EMPTY_PARAMS='{"parameters":"{}"}';
iknode.Client.prototype.execAndForget=function(a){if(!(a.hasOwnProperty("task")&&a.hasOwnProperty("params"))){throw"It is required to provide the Task to execute and its parameters"
}this._executeRequest(this._buildRequest(this._getTaskInfo(a.task)),a.params)};iknode.Client.prototype.exec=function(a){if(!(a.hasOwnProperty("task")&&a.hasOwnProperty("params"))){throw"It is required to provide the Task to execute and its parameters"
}var b=a.hasOwnProperty("callback")?a.callback:null;this._executeRequest(this._buildRequest(this._getTaskInfo(a.task)),a.params,b)
};iknode.Client.prototype._requestUri="https://api.iknode.com/Applications/execute/";
iknode.Client.prototype._getTaskInfo=function(a){var b=a.split(":");if(b.length!==2){throw"Malformed task definition found, task should come as [Application]:[Method]"
}return{application:b[0],method:b[1]}};iknode.Client.prototype._buildRequest=function(a){var b=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP");
b.open("POST",this._requestUri+a.application+"/"+a.method,true);b.setRequestHeader("Content-Type","application/json");
b.setRequestHeader("iKnode-UserId",this.userId);b.setRequestHeader("iKnode-ApiKey",this.apiKey);
return b};iknode.Client.prototype._executeRequest=function(a,b,c){if(c){a.onreadystatechange=function(){if(a.readyState===4&&a.status===200){c(a.responseText)
}}}a.send(b)};